<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="CrossSlipPro — AI-powered cross-sportsbook bet slip analyzer." />
  <title>CrossSlipPro — CSU Pro</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.0.2/dist/tesseract.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body>

  <!-- ===== HEADER ===== -->
  <header class="header">
    <div class="logo-wrap">
      <img src="assets/logo.png" alt="CrossSlipPro logo" class="logo" onerror="this.style.display='none'" />
      <h1 class="brand">CrossSlipPro <span class="muted">— CSU Pro</span></h1>
    </div>

    <nav class="nav">
      <a href="#" id="navHome" title="Home">🏠</a>
      <a href="#how" title="How it works">📘</a>
      <a href="#privacy" title="Privacy">🔒</a>
      <button id="settingsBtn" class="ghost icon" title="Settings">⚙️</button>
      <button id="modeBtn" class="ghost icon" title="Dark / Light">◐</button>
    </nav>
  </header>

  <!-- ===== HERO ===== -->
  <section class="hero center">
    <h2>AI-powered cross-sportsbook slip analyzer</h2>
    <p class="muted">Upload screenshots from FanDuel, DraftKings, Hard Rock, BetMGM, and more. Analyze odds, EV, and confidence instantly.</p>
  </section>

  <!-- ===== MAIN APP ===== -->
  <main class="container">

    <div class="card center" id="drop">
      <h3>Upload Bet Screenshot</h3>
      <p class="muted sm">Drop one or more sportsbook screenshots (FanDuel, DraftKings, Hard Rock, etc.). OCR runs in your browser.</p>
      <button id="pick" class="primary">Choose images</button>
      <input type="file" id="file" multiple hidden accept="image/*" />
      <div id="thumbs" class="thumbs"></div>
      <div class="mt"><button id="analyzeBtn" class="primary">Analyze Slip</button> <button id="clearBtn" class="ghost">Clear</button></div>
      <div id="status" class="muted mt-sm"></div>
    </div>

    <div class="card">
      <h3>Parsed Slip (edit freely)</h3>

      <label>Sportsbook</label>
      <input id="book" class="input" placeholder="Unknown" />

      <label>League</label>
      <input id="league" class="input" placeholder="NBA / NFL / MLB / etc." />

      <label>Market</label>
      <input id="market" class="input" placeholder="Moneyline / Spread / Total / Prop" />

      <label>Title</label>
      <input id="title" class="input" placeholder="Optional custom title" />

      <h4>Teams / Players</h4>
      <ul id="teams" class="list"></ul>
      <button id="addTeam" class="ghost small">+ Add</button>

      <h4>Your Odds</h4>
      <ul id="odds" class="list"></ul>
      <button id="addOdds" class="ghost small">+ Add</button>

      <h4>Compare (other book)</h4>
      <ul id="competitor" class="list"></ul>
      <button id="addComp" class="ghost small">+ Add</button>

      <label>Stake</label>
      <input id="stake" class="input" type="number" min="0" placeholder="Enter stake amount" />
    </div>

    <div class="card">
      <h3>Analysis Results</h3>
      <div class="grid cols-2 gap">
        <div><b>Parlay Win Chance</b><div id="pWin">—</div></div>
        <div><b>Decimal Odds</b><div id="pDec">—</div></div>
        <div><b>Potential Profit</b><div id="pProfit">—</div></div>
        <div><b>Expected Value</b><div id="pEV">—</div></div>
        <div><b>Half-Kelly Stake</b><input id="kellyHalf" readonly class="input" /></div>
        <div><b>Confidence</b>
          <div class="bar"><div id="confBar"></div></div>
          <div id="confPct" class="muted sm">—</div>
        </div>
      </div>

      <h4>Insights</h4>
      <ul id="insights"></ul>
    </div>

    <div class="card">
      <h3>Share & Export</h3>
      <button id="shareBtn" class="primary">Generate Share Link</button>
      <input id="shareOut" class="input mt-sm" readonly />

      <div class="mt">
        <button id="genImgBtn" class="ghost">Generate Share Image</button>
        <button id="copyImgBtn" class="ghost" disabled>Copy</button>
        <button id="downloadImgBtn" class="ghost" disabled>Download</button>
      </div>

      <div id="shareCard" class="share-preview mt"></div>
      <img id="shareImg" class="share-preview mt" />
    </div>

  </main>

  <!-- ===== SETTINGS DIALOG ===== -->
  <dialog id="settings">
    <form method="dialog" class="card">
      <h3>Settings</h3>
      <label>Odds API key (optional)</label>
      <input id="oddsKey" class="input" placeholder="Enter your API key" />
      <p class="muted sm">Used for real-time market comparison. Stored locally only.</p>
      <menu>
        <button id="saveSettings" class="primary">Save</button>
        <button value="cancel" class="ghost">Cancel</button>
      </menu>
    </form>
  </dialog>

  <!-- ===== FOOTER ===== -->
  <footer class="footer center">
    <p>© <span id="year"></span> CrossSlipPro — Built by <b>VulnerableJeff</b> · <span class="muted">Powered by CSU Predicts</span></p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
